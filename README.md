概要
ビットフィールドが意図通りに動作するかどうかを確認するためのテストコードです。
日本の株式市場のうち、ストップ高・ストップ安が ±800 円以内の銘柄を対象としています。
設計方針
64bit に収まることを前提とし、初値は 40 万円を上限とします。
初値(Open)は小数第1位まで扱うため、10 倍した値を基準値としてビットフィールドに格納します。
高値(High)/安値(Low)/終値(Close)は,初値との差額を保持し、その差額も同様に 10 倍した値を格納できるようビット数を指定しています。
これにより、値域を確保しつつビット幅を抑えた表現が可能かどうかを検証しています。
